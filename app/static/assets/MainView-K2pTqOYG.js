import{d as T,_ as k,u as U,o as f,c as b,a as s,r as x,b as l,e,w as t,f as i,g as w,t as C,v as F,F as S,h as z,i as M,j as B,k as D,l as P,p as L,m as R,n as j,s as q,q as E,x as G,y as J,z as K}from"./index-CJd5nHo2.js";import{g as O,s as Q}from"./alumnus-EJ8dTzHo.js";import{s as V}from"./request-vRFKru4k.js";import{_ as W}from"./logo-D5OX4VX_.js";import{c as A,a as H}from"./common-DR-T8v4v.js";import{A as N}from"./AlumnusDetail-Cudy89di.js";import{g as X}from"./user-D9452C-O.js";import{u as Y}from"./user-XRSNCG8L.js";const Z=T("allShowAlumnusStore",{state(){return{alumnuss:[]}},actions:{setAlumnus(g){this.alumnuss=g}}}),ee={__name:"LogoMain",setup(g){const _=U();function a(){_.push("/")}return(c,u)=>(f(),b("div",{class:"logo-container",onClick:a},u[0]||(u[0]=[s("div",{class:"logo"},[s("img",{src:W,alt:"logo"})],-1),s("div",{class:"logo-title hidden-sm-and-down"},[s("span",{class:"logo-text"},"泉州经贸职业技术学院")],-1)])))}},te=k(ee,[["__scopeId","data-v-b7536556"]]),ne={class:"container"},ae={class:"carousel-area"},oe={class:"carousel-container"},le={style:{display:"flex","align-items":"center","justify-content":"center","margin-top":"10px"}},se={__name:"MainSearch",props:["alumnus"],setup(g){const _=g,a=window.innerHeight-150,c=x({}),u=x(!1),h=(p,o)=>{c.value=o,u.value=!0};return(p,o)=>{const r=l("el-table-column"),d=l("el-avatar"),n=l("el-text"),m=l("el-button"),y=l("el-table"),$=l("el-dialog");return f(),b(S,null,[s("div",ne,[s("div",ae,[s("div",oe,[e(y,{data:_.alumnus,style:{width:"100%"},border:"",height:a},{default:t(()=>[e(r,{label:"校友编号",prop:"id",align:"center",fixed:"left",width:"100"}),e(r,{label:"校友ID",prop:"alumnus_id",align:"center",fixed:"left",width:"200"}),e(r,{label:"校友头像",prop:"photo",align:"center",width:"100"},{default:t(({row:v})=>[e(d,{size:50,src:i(A)(v.photo),shape:"circle"},null,8,["src"])]),_:1}),e(r,{label:"校友老照片",prop:"old_photo",align:"center",width:"100"},{default:t(({row:v})=>[e(d,{size:50,src:i(A)(v.old_photo),shape:"circle"},null,8,["src"])]),_:1}),e(r,{label:"校友姓名",prop:"alumnus_name",align:"center",width:"200"}),e(r,{label:"校友性别",prop:"alumnus_gender",align:"center",width:"100"}),e(r,{label:"校友生日",prop:"birthday",align:"center",width:"200"}),e(r,{label:"校友国籍",prop:"nationality",align:"center",width:"200"}),e(r,{label:"校友民族",prop:"nation",align:"center",width:"200"}),e(r,{label:"校友学号",prop:"student_number",align:"center",width:"200"}),e(r,{label:"校友籍贯",prop:"native_place",align:"center",width:"400"},{default:t(({row:v})=>[e(n,{truncated:""},{default:t(()=>[w(C(v.native_place),1)]),_:2},1024)]),_:1}),e(r,{align:"center",fixed:"right",width:"120",label:"相关操作"},{default:t(v=>[e(m,{type:"success",round:"",onClick:I=>h(v.$index,v.row),icon:i(F)},{default:t(()=>o[1]||(o[1]=[w("查看")])),_:2},1032,["onClick","icon"])]),_:1})]),_:1},8,["data"]),s("div",le,C(_.alumnus.length)+" 条搜索结果 ",1)])])]),e($,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=v=>u.value=v),title:"校友信息详情",width:"75%"},{default:t(()=>[e(N,{data:c.value},null,8,["data"])]),_:1},8,["modelValue"])],64)}}},re=k(se,[["__scopeId","data-v-8f721820"]]),ue={class:"user-card-container"},ie=["src"],de={__name:"UserCard",props:["info"],setup(g){const _=g,a=x({}),c=x(!1),u=h=>{a.value=h,c.value=!0};return(h,p)=>{const o=l("el-col"),r=l("el-row"),d=l("el-card"),n=l("el-dialog");return f(),b(S,null,[s("div",ue,[e(r,{gutter:10,style:{height:"100%"}},{default:t(()=>[(f(!0),b(S,null,z(_.info,m=>(f(),M(o,{span:8,style:{margin:"10px 0",height:"46%"}},{default:t(()=>[e(d,{shadow:"hover",onClick:y=>u(m)},{default:t(()=>[e(r,{gutter:10,style:{height:"100%"}},{default:t(()=>[e(o,{span:11,style:{height:"100%"}},{default:t(()=>[s("img",{src:i(A)(m.photo),class:"avatar-image",alt:""},null,8,ie)]),_:2},1024),e(o,{span:13},{default:t(()=>[s("div",null,"姓名: "+C(m.alumnus_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),256))]),_:1})]),e(n,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=m=>c.value=m),title:"校友信息详情",width:"75%"},{default:t(()=>[e(N,{data:a.value},null,8,["data"])]),_:1},8,["modelValue"])],64)}}},ce=k(de,[["__scopeId","data-v-d3a59798"]]),_e={class:"container"},pe={class:"carousel-area"},me={class:"carousel-container"},fe={__name:"MainIndexPeoples",props:["alumnus"],setup(g){const _=g,a=window.innerHeight-100+"px";return x({}),x(!1),(c,u)=>{const h=l("el-carousel-item"),p=l("el-carousel");return f(),b("div",_e,[s("div",pe,[s("div",me,[e(p,{"indicator-position":"none",height:a,"pause-on-hover":!0,arrow:"never"},{default:t(()=>[(f(!0),b(S,null,z(_.alumnus,o=>(f(),M(h,{key:o.id},{default:t(()=>[e(ce,{info:o},null,8,["info"])]),_:2},1024))),128))]),_:1})])])])}}},ve=k(fe,[["__scopeId","data-v-4d0debd2"]]),he={class:"avatar-container"},ge={class:"el-dropdown-link"},we={__name:"MainMenuAvatar",setup(g){const _=U();let a=Y();B(async()=>{await X().then(p=>{a.setUserInfo(p.data)})});const c=D(()=>a.userInfo.avatar===void 0?H():H(a.userInfo.avatar));D(()=>adminRoles.includes(a.userInfo.role));function u(p){_.push(p)}function h(){E(),a.setUserInfo({}),a.isLogin=!1,V("success","登出成功"),_.push("/auth/login")}return(p,o)=>{const r=l("el-avatar"),d=l("el-icon"),n=l("el-dropdown-item"),m=l("el-dropdown-menu"),y=l("el-dropdown");return f(),b("div",he,[e(y,{trigger:"click"},{dropdown:t(()=>[e(m,null,{default:t(()=>[e(n,null,{default:t(()=>[e(d,null,{default:t(()=>[e(i(P))]),_:1}),w(" "+C(i(a).userInfo.username),1)]),_:1}),e(n,null,{default:t(()=>[e(d,null,{default:t(()=>[e(i(L))]),_:1}),w(" "+C(i(a).userInfo.role),1)]),_:1}),i(a).userInfo.role==="超级管理员"?(f(),M(n,{key:0,onClick:o[0]||(o[0]=$=>{u("/admin")}),divided:""},{default:t(()=>[e(d,null,{default:t(()=>[e(i(R))]),_:1}),o[1]||(o[1]=w(" 后台管理 "))]),_:1})):j("",!0),e(n,{divided:"",onClick:h},{default:t(()=>[e(d,null,{default:t(()=>[e(i(q))]),_:1}),o[2]||(o[2]=w(" 退出系统 "))]),_:1})]),_:1})]),default:t(()=>[s("span",ge,[e(r,{src:c.value,size:45,class:"avatar"},null,8,["src"])])]),_:1})])}}},xe=k(we,[["__scopeId","data-v-80db63f3"]]),be={class:"main-container"},ye={class:"main-head"},$e={class:"logo-container"},ke={class:"menu-container"},Ie={class:"nav-user-area"},Ve={class:"main-body"},Ce={__name:"MainView",setup(g){const _=U(),a=x(!1),c=x([]),u=x(""),h=Z();B(()=>{O().then(d=>{h.setAlumnus(d.data)}).catch(d=>{V("error","获取展示列表失败")})});const p=()=>{if(u.value.trim()===""){V("warning","请输入最少一个字符");return}let d={search_by:"姓名",q:u.value};Q(d).then(n=>{c.value=n.data,a.value=!0}).catch(n=>{V("error","搜索出错")})},o=()=>{a.value=!1,u.value="",c.value=[]},r=()=>{_.go(0),V("success","刷新成功")};return(d,n)=>{const m=l("el-col"),y=l("el-input"),$=l("el-button"),v=l("el-row");return f(),b("div",be,[s("div",ye,[e(v,{class:"main-nav"},{default:t(()=>[e(m,{xs:8,sm:8,md:7,lg:6,xl:5},{default:t(()=>[s("div",$e,[e(te)])]),_:1}),e(m,{xm:8,sm:8,md:10,lg:12,xl:14},{default:t(()=>[s("div",ke,[e(y,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=I=>u.value=I),style:{height:"40px","border-radius":"20px"},"prefix-icon":i(L),placeholder:"请输入校友姓名, 并点击搜索按钮",clearable:""},null,8,["modelValue","prefix-icon"])])]),_:1}),e(m,{xm:8,sm:8,md:7,lg:6,xl:5},{default:t(()=>[s("div",Ie,[s("div",null,[e($,{type:"success",plain:"",round:"",icon:i(G),onClick:n[1]||(n[1]=I=>{p()})},{default:t(()=>n[4]||(n[4]=[w("搜索")])),_:1},8,["icon"]),e($,{type:"warning",plain:"",round:"",icon:i(J),disabled:!a.value,onClick:n[2]||(n[2]=I=>{o()})},{default:t(()=>n[5]||(n[5]=[w("清除")])),_:1},8,["icon","disabled"]),e($,{type:"primary",plain:"",round:"",icon:i(K),onClick:n[3]||(n[3]=I=>{r()})},{default:t(()=>n[6]||(n[6]=[w("刷新")])),_:1},8,["icon"])]),e(xe)])]),_:1})]),_:1})]),s("div",Ve,[a.value?(f(),M(re,{key:0,alumnus:c.value},null,8,["alumnus"])):(f(),M(ve,{key:1,alumnus:i(h).alumnuss},null,8,["alumnus"]))])])}}},Le=k(Ce,[["__scopeId","data-v-61340756"]]);export{Le as default};
