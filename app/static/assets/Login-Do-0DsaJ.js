import{_ as z}from"./logo-D5OX4VX_.js";import{_ as L,r as p,u as C,D as v,K as N,b as r,o as R,i as T,w as a,e as s,a as o,f as x,l as j,J as q,g as D,t as E,L as I}from"./index-CJd5nHo2.js";import{u as J}from"./user-XRSNCG8L.js";import{a as K,s as w}from"./request-vRFKru4k.js";const S="/assets/welcome-BotJ3kv3.png";function A(f){return K({method:"post",url:"/auth/login",headers:{"Content-Type":"application/json"},rejectUnauthorized:!1,data:f})}const M={class:"login-box"},$={class:"form-area"},F={__name:"Login",setup(f){const u=p(null),m=p(!1),d=p("登陆校友管理系统"),b=J(),y=C(),t=v({username:"",password:""}),h=v({username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:2,max:20,message:"用户名长度必须在2到20之间",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:20,message:"密码长度必须在6到20之间",trigger:"blur"}]}),g=n=>{n.validate(e=>{if(!e)return!1;m.value=!0,d.value="登录中...",A(t).then(l=>{I(l.data.token),b.setIsLogin(!0),y.push({path:"/"}),w("success","登陆成功")}).catch(l=>{w("error",l.message)}).finally(()=>{m.value=!1,d.value="登陆校友管理系统"})})};function k(n){n.key==="Enter"&&g(u.value)}return N(()=>{document.removeEventListener("keyup",k)}),(n,e)=>{const l=r("el-col"),_=r("el-input"),c=r("el-form-item"),V=r("el-button"),B=r("el-form"),U=r("el-row");return R(),T(U,{class:"main-container"},{default:a(()=>[s(l,{xs:0,sm:0,md:0,lg:12,xl:12,class:"logo-container"},{default:a(()=>e[3]||(e[3]=[o("img",{class:"logo-image",src:S,alt:"logo"},null,-1)])),_:1}),s(l,{xs:24,sm:24,md:24,lg:12,xl:12,class:"login-container"},{default:a(()=>[o("div",M,[e[4]||(e[4]=o("div",{class:"login-header"},[o("div",{class:"login-logo"},[o("img",{src:z,alt:""})]),o("div",{class:"logo-name"},[o("div",null,[o("h1",{style:{color:"#0dda91"}},"泉州经贸职业技术学院")]),o("div",null,"校友管理系统平台")])],-1)),o("div",$,[s(B,{ref_key:"formRef",ref:u,model:t,rules:h},{default:a(()=>[s(c,{prop:"username"},{default:a(()=>[s(_,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=i=>t.username=i),class:"w-50 m-2",placeholder:"账号","prefix-icon":x(j),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(c,{style:{"margin-top":"20px"},prop:"password"},{default:a(()=>[s(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.password=i),class:"w-50 m-2",placeholder:"密码","prefix-icon":x(q),size:"large",type:"password","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(c,{style:{"margin-top":"30px","box-sizing":"border-box"}},{default:a(()=>[s(V,{type:"success",plain:"",size:"large",round:"",style:{width:"100%"},onClick:e[2]||(e[2]=i=>g(u.value)),loading:m.value},{default:a(()=>[D(E(d.value),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])]),_:1})]),_:1})}}},Q=L(F,[["__scopeId","data-v-201b2dfc"]]);export{Q as default};
